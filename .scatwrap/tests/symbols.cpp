<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>tests/symbols.cpp</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
#include&#32;&quot;symbols.h&quot;<br>
#include&#32;&quot;doctest/doctest.h&quot;<br>
<br>
#include&#32;&lt;string&gt;<br>
<br>
TEST_CASE(&quot;CppSymbolFinder:&#32;finds&#32;simple&#32;class&#32;definition&quot;)<br>
{<br>
&#32;&#32;&#32;&#32;std::string&#32;src&#32;=&#32;&quot;class&#32;Foo&#32;{\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;public:\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;void&#32;bar();\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;class&#32;Bar&#32;{};\n&quot;;<br>
<br>
&#32;&#32;&#32;&#32;CppSymbolFinder&#32;finder(src);<br>
&#32;&#32;&#32;&#32;Region&#32;r;<br>
<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_class(&quot;Foo&quot;,&#32;r));<br>
&#32;&#32;&#32;&#32;CHECK(r.start_line&#32;==&#32;0);<br>
&#32;&#32;&#32;&#32;CHECK(r.end_line&#32;==&#32;3);<br>
<br>
&#32;&#32;&#32;&#32;//&#32;Другой&#32;класс&#32;тоже&#32;должен&#32;находиться<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_class(&quot;Bar&quot;,&#32;r));<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder:&#32;ignores&#32;forward&#32;declaration&quot;)<br>
{<br>
&#32;&#32;&#32;&#32;std::string&#32;src&#32;=&#32;&quot;class&#32;Foo;\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;class&#32;Foo&#32;{\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;public:\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;void&#32;bar();\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;;<br>
<br>
&#32;&#32;&#32;&#32;CppSymbolFinder&#32;finder(src);<br>
&#32;&#32;&#32;&#32;Region&#32;r;<br>
<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_class(&quot;Foo&quot;,&#32;r));<br>
&#32;&#32;&#32;&#32;CHECK(r.start_line&#32;==&#32;2);<br>
&#32;&#32;&#32;&#32;CHECK(r.end_line&#32;==&#32;5);<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder:&#32;finds&#32;method&#32;declarations&#32;inside&#32;class&quot;)<br>
{<br>
&#32;&#32;&#32;&#32;std::string&#32;src&#32;=&#32;&quot;class&#32;Foo&#32;{\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;public:\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;int&#32;bar(int&#32;x)&#32;const;\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;void&#32;baz();\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;;<br>
<br>
&#32;&#32;&#32;&#32;CppSymbolFinder&#32;finder(src);<br>
<br>
&#32;&#32;&#32;&#32;Region&#32;r1;<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_method(&quot;Foo&quot;,&#32;&quot;bar&quot;,&#32;r1));<br>
&#32;&#32;&#32;&#32;CHECK(r1.start_line&#32;==&#32;2);<br>
&#32;&#32;&#32;&#32;CHECK(r1.end_line&#32;==&#32;2);<br>
<br>
&#32;&#32;&#32;&#32;Region&#32;r2;<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_method(&quot;Foo&quot;,&#32;&quot;baz&quot;,&#32;r2));<br>
&#32;&#32;&#32;&#32;CHECK(r2.start_line&#32;==&#32;3);<br>
&#32;&#32;&#32;&#32;CHECK(r2.end_line&#32;==&#32;3);<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder:&#32;finds&#32;inline&#32;method&#32;definition&quot;)<br>
{<br>
&#32;&#32;&#32;&#32;std::string&#32;src&#32;=&#32;&quot;class&#32;Foo&#32;{\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;public:\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;int&#32;bar(int&#32;x)&#32;const&#32;{\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;return&#32;x&#32;+&#32;1;\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;}\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;;<br>
<br>
&#32;&#32;&#32;&#32;CppSymbolFinder&#32;finder(src);<br>
&#32;&#32;&#32;&#32;Region&#32;r;<br>
<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_method(&quot;Foo&quot;,&#32;&quot;bar&quot;,&#32;r));<br>
&#32;&#32;&#32;&#32;CHECK(r.start_line&#32;==&#32;2);<br>
&#32;&#32;&#32;&#32;CHECK(r.end_line&#32;==&#32;4);<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder:&#32;method&#32;not&#32;found&#32;returns&#32;false&quot;)<br>
{<br>
&#32;&#32;&#32;&#32;std::string&#32;src&#32;=&#32;&quot;class&#32;Foo&#32;{\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;public:\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;void&#32;bar();\n&quot;<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;;<br>
<br>
&#32;&#32;&#32;&#32;CppSymbolFinder&#32;finder(src);<br>
&#32;&#32;&#32;&#32;Region&#32;r;<br>
<br>
&#32;&#32;&#32;&#32;CHECK_FALSE(finder.find_method(&quot;Foo&quot;,&#32;&quot;baz&quot;,&#32;r));<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder:&#32;complex&#32;file&#32;with&#32;multiple&#32;classes&#32;and&#32;comments&quot;)<br>
{<br>
&#32;&#32;&#32;&#32;std::string&#32;src&#32;=&#32;&quot;#pragma&#32;once\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;0<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;1<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;//&#32;forward&#32;decl\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;2<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;class&#32;Forward;\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;3<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;4<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;/*&#32;comment&#32;with&#32;class&#32;Fake&#32;{&#32;*/\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;5<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;6<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;class&#32;First&#32;{\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;7<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;public:\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;8<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;//&#32;method&#32;comment\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;9<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;int&#32;m1(int&#32;x)&#32;const;\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;10<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;std::string&#32;m2()&#32;const&#32;{\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;11<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;return&#32;\&quot;class&#32;Fake&#32;{\&quot;;&#32;//&#32;in&#32;string\n&quot;&#32;//&#32;12<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;}\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;13<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;14<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;15<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;//&#32;Another&#32;class\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;16<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;struct&#32;Second&#32;{\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;17<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;void&#32;go();\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;18<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;19<br>
<br>
&#32;&#32;&#32;&#32;CppSymbolFinder&#32;finder(src);<br>
&#32;&#32;&#32;&#32;Region&#32;r;<br>
<br>
&#32;&#32;&#32;&#32;//&#32;forward&#32;declaration&#32;не&#32;должен&#32;считаться&#32;определением<br>
&#32;&#32;&#32;&#32;CHECK_FALSE(finder.find_class(&quot;Forward&quot;,&#32;r));<br>
<br>
&#32;&#32;&#32;&#32;//&#32;Первый&#32;класс<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_class(&quot;First&quot;,&#32;r));<br>
&#32;&#32;&#32;&#32;CHECK(r.start_line&#32;==&#32;7);<br>
&#32;&#32;&#32;&#32;CHECK(r.end_line&#32;==&#32;14);<br>
<br>
&#32;&#32;&#32;&#32;//&#32;Второй&#32;класс<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_class(&quot;Second&quot;,&#32;r));<br>
&#32;&#32;&#32;&#32;CHECK(r.start_line&#32;==&#32;17);<br>
&#32;&#32;&#32;&#32;CHECK(r.end_line&#32;==&#32;19);<br>
<br>
&#32;&#32;&#32;&#32;//&#32;Методы&#32;первого&#32;класса<br>
&#32;&#32;&#32;&#32;Region&#32;m1;<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_method(&quot;First&quot;,&#32;&quot;m1&quot;,&#32;m1));<br>
&#32;&#32;&#32;&#32;CHECK(m1.start_line&#32;==&#32;10);<br>
&#32;&#32;&#32;&#32;CHECK(m1.end_line&#32;==&#32;10);<br>
<br>
&#32;&#32;&#32;&#32;Region&#32;m2;<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_method(&quot;First&quot;,&#32;&quot;m2&quot;,&#32;m2));<br>
&#32;&#32;&#32;&#32;CHECK(m2.start_line&#32;==&#32;11);<br>
&#32;&#32;&#32;&#32;CHECK(m2.end_line&#32;==&#32;13);<br>
<br>
&#32;&#32;&#32;&#32;//&#32;Метод&#32;во&#32;втором&#32;классе<br>
&#32;&#32;&#32;&#32;Region&#32;m_go;<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_method(&quot;Second&quot;,&#32;&quot;go&quot;,&#32;m_go));<br>
&#32;&#32;&#32;&#32;CHECK(m_go.start_line&#32;==&#32;18);<br>
&#32;&#32;&#32;&#32;CHECK(m_go.end_line&#32;==&#32;18);<br>
<br>
&#32;&#32;&#32;&#32;CHECK_FALSE(finder.find_class(&quot;Fake&quot;,&#32;r));<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder:&#32;handles&#32;extra&#32;whitespace&#32;and&#32;newlines&quot;)<br>
{<br>
&#32;&#32;&#32;&#32;std::string&#32;src&#32;=&#32;&quot;&#32;&#32;\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;0<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;class&#32;&#32;&#32;Weird&#32;&#32;\n&quot;&#32;&#32;&#32;&#32;//&#32;1<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;:&#32;public&#32;Base\n&quot;&#32;&#32;&#32;&#32;//&#32;2<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;{\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;3<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;public:\n&quot;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;4<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;&#32;&#32;&#32;&#32;void&#32;&#32;run&#32;(&#32;);\n&quot;&#32;//&#32;5<br>
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&quot;};\n&quot;;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;//&#32;6<br>
<br>
&#32;&#32;&#32;&#32;CppSymbolFinder&#32;finder(src);<br>
&#32;&#32;&#32;&#32;Region&#32;rc;<br>
<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_class(&quot;Weird&quot;,&#32;rc));<br>
&#32;&#32;&#32;&#32;CHECK(rc.start_line&#32;==&#32;1);<br>
&#32;&#32;&#32;&#32;CHECK(rc.end_line&#32;==&#32;6);<br>
<br>
&#32;&#32;&#32;&#32;Region&#32;rm;<br>
&#32;&#32;&#32;&#32;CHECK(finder.find_method(&quot;Weird&quot;,&#32;&quot;run&quot;,&#32;rm));<br>
&#32;&#32;&#32;&#32;CHECK(rm.start_line&#32;==&#32;5);<br>
&#32;&#32;&#32;&#32;CHECK(rm.end_line&#32;==&#32;5);<br>
}<br>
<!-- END SCAT CODE -->
</body>
</html>
