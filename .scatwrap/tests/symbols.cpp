<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>tests/symbols.cpp</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
#include &#20;&quot;symbols.h&quot;<br>
#include &#20;&quot;doctest/doctest.h&quot;<br>
<br>
#include &#20;&lt;string&gt;<br>
<br>
TEST_CASE(&quot;CppSymbolFinder: &#20;finds &#20;simple &#20;class &#20;definition&quot;)<br>
{<br>
 &#20; &#20; &#20; &#20;std::string &#20;src &#20;= &#20;&quot;class &#20;Foo &#20;{\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;public:\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;void &#20;bar();\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;class &#20;Bar &#20;{};\n&quot;;<br>
<br>
 &#20; &#20; &#20; &#20;CppSymbolFinder &#20;finder(src);<br>
 &#20; &#20; &#20; &#20;Region &#20;r;<br>
<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_class(&quot;Foo&quot;, &#20;r));<br>
 &#20; &#20; &#20; &#20;CHECK(r.start_line &#20;== &#20;0);<br>
 &#20; &#20; &#20; &#20;CHECK(r.end_line &#20;== &#20;3);<br>
<br>
 &#20; &#20; &#20; &#20;// &#20;Другой &#20;класс &#20;тоже &#20;должен &#20;находиться<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_class(&quot;Bar&quot;, &#20;r));<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder: &#20;ignores &#20;forward &#20;declaration&quot;)<br>
{<br>
 &#20; &#20; &#20; &#20;std::string &#20;src &#20;= &#20;&quot;class &#20;Foo;\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;class &#20;Foo &#20;{\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;public:\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;void &#20;bar();\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot;;<br>
<br>
 &#20; &#20; &#20; &#20;CppSymbolFinder &#20;finder(src);<br>
 &#20; &#20; &#20; &#20;Region &#20;r;<br>
<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_class(&quot;Foo&quot;, &#20;r));<br>
 &#20; &#20; &#20; &#20;CHECK(r.start_line &#20;== &#20;2);<br>
 &#20; &#20; &#20; &#20;CHECK(r.end_line &#20;== &#20;5);<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder: &#20;finds &#20;method &#20;declarations &#20;inside &#20;class&quot;)<br>
{<br>
 &#20; &#20; &#20; &#20;std::string &#20;src &#20;= &#20;&quot;class &#20;Foo &#20;{\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;public:\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;int &#20;bar(int &#20;x) &#20;const;\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;void &#20;baz();\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot;;<br>
<br>
 &#20; &#20; &#20; &#20;CppSymbolFinder &#20;finder(src);<br>
<br>
 &#20; &#20; &#20; &#20;Region &#20;r1;<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_method(&quot;Foo&quot;, &#20;&quot;bar&quot;, &#20;r1));<br>
 &#20; &#20; &#20; &#20;CHECK(r1.start_line &#20;== &#20;2);<br>
 &#20; &#20; &#20; &#20;CHECK(r1.end_line &#20;== &#20;2);<br>
<br>
 &#20; &#20; &#20; &#20;Region &#20;r2;<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_method(&quot;Foo&quot;, &#20;&quot;baz&quot;, &#20;r2));<br>
 &#20; &#20; &#20; &#20;CHECK(r2.start_line &#20;== &#20;3);<br>
 &#20; &#20; &#20; &#20;CHECK(r2.end_line &#20;== &#20;3);<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder: &#20;finds &#20;inline &#20;method &#20;definition&quot;)<br>
{<br>
 &#20; &#20; &#20; &#20;std::string &#20;src &#20;= &#20;&quot;class &#20;Foo &#20;{\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;public:\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;int &#20;bar(int &#20;x) &#20;const &#20;{\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;return &#20;x &#20;+ &#20;1;\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;}\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot;;<br>
<br>
 &#20; &#20; &#20; &#20;CppSymbolFinder &#20;finder(src);<br>
 &#20; &#20; &#20; &#20;Region &#20;r;<br>
<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_method(&quot;Foo&quot;, &#20;&quot;bar&quot;, &#20;r));<br>
 &#20; &#20; &#20; &#20;CHECK(r.start_line &#20;== &#20;2);<br>
 &#20; &#20; &#20; &#20;CHECK(r.end_line &#20;== &#20;4);<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder: &#20;method &#20;not &#20;found &#20;returns &#20;false&quot;)<br>
{<br>
 &#20; &#20; &#20; &#20;std::string &#20;src &#20;= &#20;&quot;class &#20;Foo &#20;{\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;public:\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;void &#20;bar();\n&quot;<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot;;<br>
<br>
 &#20; &#20; &#20; &#20;CppSymbolFinder &#20;finder(src);<br>
 &#20; &#20; &#20; &#20;Region &#20;r;<br>
<br>
 &#20; &#20; &#20; &#20;CHECK_FALSE(finder.find_method(&quot;Foo&quot;, &#20;&quot;baz&quot;, &#20;r));<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder: &#20;complex &#20;file &#20;with &#20;multiple &#20;classes &#20;and &#20;comments&quot;)<br>
{<br>
 &#20; &#20; &#20; &#20;std::string &#20;src &#20;= &#20;&quot;#pragma &#20;once\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;0<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;1<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;// &#20;forward &#20;decl\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;2<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;class &#20;Forward;\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;3<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;4<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;/* &#20;comment &#20;with &#20;class &#20;Fake &#20;{ &#20;*/\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;5<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;6<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;class &#20;First &#20;{\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;7<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;public:\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;8<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;// &#20;method &#20;comment\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;9<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;int &#20;m1(int &#20;x) &#20;const;\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;10<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;std::string &#20;m2() &#20;const &#20;{\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;11<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;return &#20;\&quot;class &#20;Fake &#20;{\&quot;; &#20;// &#20;in &#20;string\n&quot; &#20;// &#20;12<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;}\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;13<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;14<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;15<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;// &#20;Another &#20;class\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;16<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;struct &#20;Second &#20;{\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;17<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;void &#20;go();\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;18<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot;; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;19<br>
<br>
 &#20; &#20; &#20; &#20;CppSymbolFinder &#20;finder(src);<br>
 &#20; &#20; &#20; &#20;Region &#20;r;<br>
<br>
 &#20; &#20; &#20; &#20;// &#20;forward &#20;declaration &#20;не &#20;должен &#20;считаться &#20;определением<br>
 &#20; &#20; &#20; &#20;CHECK_FALSE(finder.find_class(&quot;Forward&quot;, &#20;r));<br>
<br>
 &#20; &#20; &#20; &#20;// &#20;Первый &#20;класс<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_class(&quot;First&quot;, &#20;r));<br>
 &#20; &#20; &#20; &#20;CHECK(r.start_line &#20;== &#20;7);<br>
 &#20; &#20; &#20; &#20;CHECK(r.end_line &#20;== &#20;14);<br>
<br>
 &#20; &#20; &#20; &#20;// &#20;Второй &#20;класс<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_class(&quot;Second&quot;, &#20;r));<br>
 &#20; &#20; &#20; &#20;CHECK(r.start_line &#20;== &#20;17);<br>
 &#20; &#20; &#20; &#20;CHECK(r.end_line &#20;== &#20;19);<br>
<br>
 &#20; &#20; &#20; &#20;// &#20;Методы &#20;первого &#20;класса<br>
 &#20; &#20; &#20; &#20;Region &#20;m1;<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_method(&quot;First&quot;, &#20;&quot;m1&quot;, &#20;m1));<br>
 &#20; &#20; &#20; &#20;CHECK(m1.start_line &#20;== &#20;10);<br>
 &#20; &#20; &#20; &#20;CHECK(m1.end_line &#20;== &#20;10);<br>
<br>
 &#20; &#20; &#20; &#20;Region &#20;m2;<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_method(&quot;First&quot;, &#20;&quot;m2&quot;, &#20;m2));<br>
 &#20; &#20; &#20; &#20;CHECK(m2.start_line &#20;== &#20;11);<br>
 &#20; &#20; &#20; &#20;CHECK(m2.end_line &#20;== &#20;13);<br>
<br>
 &#20; &#20; &#20; &#20;// &#20;Метод &#20;во &#20;втором &#20;классе<br>
 &#20; &#20; &#20; &#20;Region &#20;m_go;<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_method(&quot;Second&quot;, &#20;&quot;go&quot;, &#20;m_go));<br>
 &#20; &#20; &#20; &#20;CHECK(m_go.start_line &#20;== &#20;18);<br>
 &#20; &#20; &#20; &#20;CHECK(m_go.end_line &#20;== &#20;18);<br>
<br>
 &#20; &#20; &#20; &#20;CHECK_FALSE(finder.find_class(&quot;Fake&quot;, &#20;r));<br>
}<br>
<br>
TEST_CASE(&quot;CppSymbolFinder: &#20;handles &#20;extra &#20;whitespace &#20;and &#20;newlines&quot;)<br>
{<br>
 &#20; &#20; &#20; &#20;std::string &#20;src &#20;= &#20;&quot; &#20; &#20;\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;0<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;class &#20; &#20; &#20;Weird &#20; &#20;\n&quot; &#20; &#20; &#20; &#20;// &#20;1<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20;: &#20;public &#20;Base\n&quot; &#20; &#20; &#20; &#20;// &#20;2<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;{\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;3<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;public:\n&quot; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;4<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot; &#20; &#20; &#20; &#20;void &#20; &#20;run &#20;( &#20;);\n&quot; &#20;// &#20;5<br>
 &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;&quot;};\n&quot;; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20; &#20;// &#20;6<br>
<br>
 &#20; &#20; &#20; &#20;CppSymbolFinder &#20;finder(src);<br>
 &#20; &#20; &#20; &#20;Region &#20;rc;<br>
<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_class(&quot;Weird&quot;, &#20;rc));<br>
 &#20; &#20; &#20; &#20;CHECK(rc.start_line &#20;== &#20;1);<br>
 &#20; &#20; &#20; &#20;CHECK(rc.end_line &#20;== &#20;6);<br>
<br>
 &#20; &#20; &#20; &#20;Region &#20;rm;<br>
 &#20; &#20; &#20; &#20;CHECK(finder.find_method(&quot;Weird&quot;, &#20;&quot;run&quot;, &#20;rm));<br>
 &#20; &#20; &#20; &#20;CHECK(rm.start_line &#20;== &#20;5);<br>
 &#20; &#20; &#20; &#20;CHECK(rm.end_line &#20;== &#20;5);<br>
}<br>
<!-- END SCAT CODE -->
</body>
</html>
