<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>README.md</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
Окей,&nbsp;делаем&nbsp;компактную&nbsp;версию,&nbsp;но&nbsp;с&nbsp;описанием&nbsp;нового&nbsp;symbol&nbsp;API.&nbsp;Вот&nbsp;целиком&nbsp;новый&nbsp;`README.md`&nbsp;(без&nbsp;chunk_v2-патча,&nbsp;просто&nbsp;файл):<br>
<br>
````markdown<br>
#&nbsp;scat<br>
<br>
`scat`&nbsp;is&nbsp;a&nbsp;small&nbsp;cross-platform&nbsp;utility&nbsp;for:<br>
<br>
*&nbsp;printing&nbsp;multiple&nbsp;files&nbsp;with&nbsp;clear&nbsp;headers&nbsp;(for&nbsp;copy-paste&nbsp;into&nbsp;chats),<br>
*&nbsp;listing&nbsp;files&nbsp;with&nbsp;sizes,<br>
*&nbsp;applying&nbsp;structured&nbsp;patches&nbsp;(chunk_v2),<br>
*&nbsp;replacing&nbsp;C++&nbsp;/&nbsp;Python&nbsp;classes&nbsp;and&nbsp;methods&nbsp;by&nbsp;name&nbsp;(symbol&nbsp;API).<br>
<br>
---<br>
<br>
##&nbsp;Basic&nbsp;usage<br>
<br>
Print&nbsp;files:<br>
<br>
```bash<br>
scat&nbsp;file1.cpp&nbsp;dir/file2.h<br>
scat&nbsp;src&nbsp;-r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;recursive<br>
scat&nbsp;src&nbsp;-r&nbsp;--abs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;absolute&nbsp;paths<br>
scat&nbsp;src&nbsp;-r&nbsp;-l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;list&nbsp;with&nbsp;sizes<br>
scat&nbsp;src&nbsp;-r&nbsp;-l&nbsp;--sorted&nbsp;&nbsp;#&nbsp;list,&nbsp;sorted&nbsp;by&nbsp;size&nbsp;(descending)<br>
````<br>
<br>
Output&nbsp;looks&nbsp;like:<br>
<br>
```text<br>
=====&nbsp;path/to/file.cpp&nbsp;=====<br>
&lt;file&nbsp;content&gt;<br>
```<br>
<br>
You&nbsp;can&nbsp;pipe&nbsp;into&nbsp;clipboard&nbsp;tools:<br>
<br>
```bash<br>
scat&nbsp;src&nbsp;-r&nbsp;|&nbsp;clip.exe&nbsp;&nbsp;&nbsp;#&nbsp;Windows&nbsp;/&nbsp;WSL<br>
scat&nbsp;src&nbsp;-r&nbsp;|&nbsp;wl-copy&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Linux&nbsp;/&nbsp;WSL<br>
```<br>
<br>
---<br>
<br>
##&nbsp;Config&nbsp;file&nbsp;mode&nbsp;(`scat.txt`&nbsp;/&nbsp;`--config`)<br>
<br>
If&nbsp;you&nbsp;run&nbsp;`scat`&nbsp;**without&nbsp;positional&nbsp;arguments**,&nbsp;it&nbsp;reads&nbsp;rules&nbsp;from&nbsp;`scat.txt`&nbsp;in&nbsp;the&nbsp;current&nbsp;directory:<br>
<br>
```bash<br>
scat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;uses&nbsp;scat.txt<br>
scat&nbsp;--config&nbsp;myrules.txt<br>
```<br>
<br>
Each&nbsp;non-empty&nbsp;line&nbsp;is&nbsp;a&nbsp;rule:<br>
<br>
*&nbsp;include:&nbsp;`src/*`,&nbsp;`tests/**`,&nbsp;`CMakeLists.txt`<br>
*&nbsp;exclude:&nbsp;starts&nbsp;with&nbsp;`!`,&nbsp;e.g.&nbsp;`!tests/doctest/**`<br>
<br>
Patterns:<br>
<br>
*&nbsp;`*`&nbsp;—&nbsp;match&nbsp;inside&nbsp;one&nbsp;directory<br>
*&nbsp;`**`&nbsp;—&nbsp;recursive&nbsp;directory&nbsp;traversal<br>
<br>
Example:<br>
<br>
```text<br>
src/*<br>
tests/*<br>
!tests/doctest/**<br>
CMakeLists.txt<br>
scat.txt<br>
```<br>
<br>
###&nbsp;Project&nbsp;tree&nbsp;(`[TREE]`&nbsp;section)<br>
<br>
Optional&nbsp;second&nbsp;rule&nbsp;set&nbsp;used&nbsp;only&nbsp;for&nbsp;a&nbsp;tree&nbsp;view&nbsp;at&nbsp;the&nbsp;end:<br>
<br>
```text<br>
src/*<br>
tests/*<br>
[TREE]<br>
src/**<br>
tests/**<br>
```<br>
<br>
Running&nbsp;`scat`&nbsp;will&nbsp;print&nbsp;files&nbsp;first,&nbsp;then:<br>
<br>
```text<br>
=====&nbsp;PROJECT&nbsp;TREE&nbsp;=====<br>
├──&nbsp;src/...<br>
└──&nbsp;tests/...<br>
========================<br>
```<br>
<br>
---<br>
<br>
##&nbsp;Patch&nbsp;mode&nbsp;(chunk_v2)<br>
<br>
`scat`&nbsp;can&nbsp;apply&nbsp;patches&nbsp;in&nbsp;the&nbsp;chunk_v2&nbsp;format.<br>
<br>
```bash<br>
scat&nbsp;--apply&nbsp;patch.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;apply&nbsp;from&nbsp;file<br>
wl-paste&nbsp;|&nbsp;scat&nbsp;--apply-stdin&nbsp;&nbsp;#&nbsp;apply&nbsp;from&nbsp;stdin<br>
```<br>
<br>
Patch&nbsp;structure:<br>
<br>
```text<br>
===&nbsp;file:&nbsp;path/to/file.cpp&nbsp;===<br>
---&nbsp;&lt;command&gt;&nbsp;[args...]<br>
&lt;payload&nbsp;lines...&gt;<br>
=END=<br>
```<br>
<br>
Commands:<br>
<br>
*&nbsp;text-based:<br>
<br>
&nbsp;&nbsp;*&nbsp;`insert-after-text`<br>
&nbsp;&nbsp;*&nbsp;`insert-before-text`<br>
&nbsp;&nbsp;*&nbsp;`replace-text`<br>
&nbsp;&nbsp;*&nbsp;`delete-text`<br>
*&nbsp;file-level:<br>
<br>
&nbsp;&nbsp;*&nbsp;`create-file`<br>
&nbsp;&nbsp;*&nbsp;`delete-file`<br>
*&nbsp;symbol-based:<br>
<br>
&nbsp;&nbsp;*&nbsp;`replace-cpp-class`<br>
&nbsp;&nbsp;*&nbsp;`replace-cpp-method`<br>
&nbsp;&nbsp;*&nbsp;`replace-py-class`<br>
&nbsp;&nbsp;*&nbsp;`replace-py-method`<br>
<br>
Text&nbsp;commands&nbsp;support:<br>
<br>
*&nbsp;legacy&nbsp;format:&nbsp;`marker`&nbsp;then&nbsp;`---`&nbsp;then&nbsp;payload<br>
*&nbsp;YAML-style&nbsp;context&nbsp;with&nbsp;`BEFORE:`,&nbsp;`MARKER:`,&nbsp;`AFTER:`&nbsp;blocks&nbsp;(strict&nbsp;match&nbsp;by&nbsp;trimmed&nbsp;lines)<br>
<br>
Patch&nbsp;application&nbsp;is&nbsp;transactional:&nbsp;if&nbsp;any&nbsp;section&nbsp;fails&nbsp;(marker&nbsp;not&nbsp;found,&nbsp;ambiguous,&nbsp;symbol&nbsp;not&nbsp;found,&nbsp;I/O&nbsp;error),&nbsp;all&nbsp;touched&nbsp;files&nbsp;are&nbsp;rolled&nbsp;back.<br>
<br>
---<br>
<br>
##&nbsp;Symbol&nbsp;API&nbsp;(C++&nbsp;/&nbsp;Python)<br>
<br>
Symbol&nbsp;commands&nbsp;work&nbsp;**without**&nbsp;raw&nbsp;text&nbsp;markers:&nbsp;they&nbsp;parse&nbsp;the&nbsp;file&nbsp;and&nbsp;locate&nbsp;classes&nbsp;/&nbsp;methods.<br>
<br>
Available&nbsp;commands:<br>
<br>
```text<br>
replace-cpp-class&nbsp;&nbsp;&lt;ClassName&gt;<br>
replace-cpp-method&nbsp;&lt;ClassName&gt;&nbsp;&lt;methodName&gt;<br>
replace-cpp-method&nbsp;&lt;ClassName::methodName&gt;<br>
<br>
replace-py-class&nbsp;&nbsp;&nbsp;&lt;ClassName&gt;<br>
replace-py-method&nbsp;&nbsp;&lt;ClassName&gt;&nbsp;&lt;methodName&gt;<br>
replace-py-method&nbsp;&nbsp;&lt;ClassName.methodName&gt;<br>
```<br>
<br>
###&nbsp;C++&nbsp;examples<br>
<br>
Replace&nbsp;a&nbsp;whole&nbsp;class:<br>
<br>
```text<br>
===&nbsp;file:&nbsp;src/TEST.h&nbsp;===<br>
---&nbsp;replace-cpp-class&nbsp;TargetClass<br>
class&nbsp;TargetClass<br>
{<br>
&nbsp;&nbsp;public:<br>
&nbsp;&nbsp;&nbsp;&nbsp;TargetClass()&nbsp;=&nbsp;default;<br>
&nbsp;&nbsp;&nbsp;&nbsp;~TargetClass()&nbsp;=&nbsp;default;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;value()&nbsp;const&nbsp;{&nbsp;return&nbsp;member_variable_;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;set_value(int&nbsp;v)&nbsp;{&nbsp;member_variable_&nbsp;=&nbsp;v;&nbsp;}<br>
<br>
&nbsp;&nbsp;private:<br>
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;member_variable_&nbsp;=&nbsp;0;<br>
};<br>
=END=<br>
```<br>
<br>
Replace&nbsp;a&nbsp;method&nbsp;inside&nbsp;a&nbsp;class:<br>
<br>
```text<br>
===&nbsp;file:&nbsp;src/TEST.h&nbsp;===<br>
---&nbsp;replace-cpp-method&nbsp;ClassWithTargetMethod::TargetMethod<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;TargetMethod()<br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Updated&nbsp;implementation<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;member_variable_&nbsp;+=&nbsp;1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
=END=<br>
```<br>
<br>
The&nbsp;C++&nbsp;finder:<br>
<br>
*&nbsp;skips&nbsp;comments,&nbsp;string&nbsp;/&nbsp;char&nbsp;literals&nbsp;and&nbsp;preprocessor&nbsp;lines,<br>
*&nbsp;ignores&nbsp;forward&nbsp;declarations&nbsp;(`class&nbsp;Foo;`),<br>
*&nbsp;replaces&nbsp;exactly&nbsp;the&nbsp;region&nbsp;of&nbsp;the&nbsp;target&nbsp;class&nbsp;/&nbsp;method.<br>
<br>
###&nbsp;Python&nbsp;examples<br>
<br>
Replace&nbsp;a&nbsp;whole&nbsp;class:<br>
<br>
```text<br>
===&nbsp;file:&nbsp;src/foo.py&nbsp;===<br>
---&nbsp;replace-py-class&nbsp;Foo<br>
class&nbsp;Foo:<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.x&nbsp;=&nbsp;2<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;answer(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;42<br>
=END=<br>
```<br>
<br>
Replace&nbsp;a&nbsp;method&nbsp;(sync&nbsp;or&nbsp;async)&nbsp;inside&nbsp;a&nbsp;class:<br>
<br>
```text<br>
===&nbsp;file:&nbsp;src/weird.py&nbsp;===<br>
---&nbsp;replace-py-method&nbsp;Weird&nbsp;run<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;run(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;100<br>
=END=<br>
```<br>
<br>
```text<br>
===&nbsp;file:&nbsp;src/async_foo.py&nbsp;===<br>
---&nbsp;replace-py-method&nbsp;Foo.bar<br>
&nbsp;&nbsp;&nbsp;&nbsp;async&nbsp;def&nbsp;bar(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;2<br>
=END=<br>
```<br>
<br>
The&nbsp;Python&nbsp;finder:<br>
<br>
*&nbsp;uses&nbsp;indentation&nbsp;to&nbsp;determine&nbsp;class&nbsp;/&nbsp;method&nbsp;bodies,<br>
*&nbsp;includes&nbsp;decorators&nbsp;(`@something`)&nbsp;above&nbsp;the&nbsp;method,<br>
*&nbsp;replaces&nbsp;the&nbsp;whole&nbsp;method&nbsp;body&nbsp;region.<br>
<br>
---<br>
<br>
##&nbsp;Build<br>
<br>
Linux&nbsp;/&nbsp;macOS:<br>
<br>
```bash<br>
mkdir&nbsp;build&nbsp;&amp;&amp;&nbsp;cd&nbsp;build<br>
cmake&nbsp;-DCMAKE_BUILD_TYPE=Release&nbsp;..<br>
cmake&nbsp;--build&nbsp;.<br>
cmake&nbsp;--install&nbsp;.<br>
```<br>
<br>
Windows&nbsp;(Visual&nbsp;Studio&nbsp;generator):<br>
<br>
```powershell<br>
mkdir&nbsp;build<br>
cd&nbsp;build<br>
cmake&nbsp;..<br>
cmake&nbsp;--build&nbsp;.&nbsp;--config&nbsp;Release<br>
cmake&nbsp;--install&nbsp;.&nbsp;--config&nbsp;Release<br>
```<br>
<br>
---<br>
<br>
##&nbsp;License<br>
<br>
Do&nbsp;whatever&nbsp;you&nbsp;want&nbsp;with&nbsp;it.<br>
<!-- END SCAT CODE -->
</body>
</html>
