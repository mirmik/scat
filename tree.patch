=== file: src/options.h ===
--- replace 13:13
    std::string apply_file;   // empty = no apply mode
    bool apply_stdin = false;
=END=

=== file: src/options.cpp ===
--- insert-after 52
        else if (a == "--apply-stdin")
        {
            opt.apply_stdin = true;
        }
=END=

=== file: src/scat.cpp ===
--- insert-after-text
if (!opt.apply_file.empty()) {
---
    if (opt.apply_stdin)
    {
        namespace fs = std::filesystem;

        std::stringstream ss;
        ss << std::cin.rdbuf();

        fs::path tmp = fs::temp_directory_path() / "scat_stdin_patch.txt";
        {
            std::ofstream out(tmp);
            out << ss.str();
        }

        std::string tmp_str = tmp.string();
        const char* args[] = {"apply", tmp_str.c_str()};
        int r = apply_chunk_main(2, const_cast<char**>(args));

        fs::remove(tmp);
        return r;
    }
=END=
