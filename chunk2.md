# Chunk v2 — Формат описания изменений

**Chunk v2** — текстовый формат, предназначенный для описания изменений в исходных файлах.  
Патч состоит из набора секций; каждая секция относится к одному файлу и содержит одну операцию: замену, вставку или удаление строк.

---

## 1. Структура секции

```text
=== file: <путь> ===
<команда>
<контент...>
=END=
````

* `<путь>` — относительный путь к файлу.
* Между секциями допускается одна пустая строка.
* В секции должна быть ровно одна команда.
* `<контент>` может содержать любые строки, включая пустые.

---

## 2. Команды

### Замена диапазона строк

```text
--- replace <start>:<end>
<новые строки...>
=END=
```

### Вставка после строки

```text
--- insert-after <line>
<вставляемые строки...>
=END=
```

### Удаление диапазона строк

```text
--- delete <start>:<end>
=END=
```

## 3. Нумерация строк

* Нумерация начинается с **0**.
* Диапазоны включают обе границы.

## 4. Примеры

### Замена

```text
=== file: src/a.cpp ===
--- replace 3:4
int value = 42;
std::cout << value << "\n";
=END=
```

### Вставка
```text
=== file: src/b.cpp ===
--- insert-after 12
log_debug("checkpoint reached");
=END=
```

### Удаление
```text
=== file: src/c.cpp ===
--- delete 20:25
=END=
```

### Изменение нескольких файлов
```text
=== file: src/a.cpp ===
--- replace 3:4
int value = 42;
std::cout << value << "\n";
=END=

=== file: src/b.cpp ===
--- insert-after 12
log_debug("checkpoint reached");
=END=

=== file: src/c.cpp ===
--- delete 20:25
=END=
```
